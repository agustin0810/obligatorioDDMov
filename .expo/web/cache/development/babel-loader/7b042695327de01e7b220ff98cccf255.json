{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport React from 'react';\nimport MyText from \"../../components/MyText\";\nimport { useFocusEffect } from '@react-navigation/native';\nimport DatabaseConnection from \"../../database/database-connection\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar db = DatabaseConnection.getConnection();\n\nvar DetailedList = function DetailedList() {\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      treatments = _React$useState2[0],\n      setTreatments = _React$useState2[1];\n\n  useFocusEffect(function () {\n    db.transaction(function (txn) {\n      txn.executeSql(\"SELECT * FROM treatments INNER JOIN cars ON treatments.carCode = cars.carCode\", [], function (tx, results) {\n        if (results.rows.length > 0) {\n          var temp = [];\n\n          var _loop = function _loop(i) {\n            txn.executeSql(\"SELECT name, lastname FROM users INNER JOIN cars ON cars.carCode = ? WHERE cars.carCode= ?\", [results.rows.item(i).carCode, results.rows.item(i).carCode], function (tx, results2) {\n              console.log(results.rows.item(0).carCode);\n              var treatment = results.rows.item(i);\n              treatment.name = results2.rows.item(0).name;\n              treatment.lastname = results2.rows.item(0).lastname;\n              txn.executeSql(\"SELECT name FROM replacements INNER JOIN cars ON cars.carCode = ?\", [results.rows.item(i).carCode], function (tx, results3) {\n                if (results3.rows.length != 0) {\n                  treatment.replacements = true;\n                } else {\n                  treatment.replacements = false;\n                }\n\n                temp.push(treatment);\n              });\n            });\n          };\n\n          for (var i = 0; i < results.rows.length; ++i) {\n            _loop(i);\n          }\n\n          setTreatments(temp);\n        } else {\n          Alert.alert(\"Mensaje\", \"No hay tratamientos\", [{\n            text: \"Ok\"\n          }], {\n            cancelable: false\n          });\n        }\n      });\n    });\n  });\n\n  var listItemView = function listItemView(item) {\n    return _jsxs(View, {\n      style: styles.listItemView,\n      children: [_jsx(MyText, {\n        text: \"Nombre\",\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: item.name,\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: \"Auto\",\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: item.carCode,\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: \"Fecha inicio\",\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: item.fInicio,\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: \"Fecha fin:\",\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: item.fFin,\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: \"Costo tratamiento:\",\n        style: styles.textL\n      }), _jsx(MyText, {\n        text: item.costoTratamiento,\n        style: styles.textL\n      })]\n    }, item.id);\n  };\n\n  return _jsx(SafeAreaView, {\n    style: styles.container,\n    children: _jsx(View, {\n      children: _jsxs(View, {\n        children: [_jsx(MyText, {\n          text: \"Tratamientos detallados\",\n          style: styles.title\n        }), _jsx(View, {\n          style: styles.view,\n          children: _jsx(FlatList, {\n            contentContainerStyle: {\n              paddingHorizontal: 20,\n              paddingBottom: 150\n            },\n            data: treatments,\n            keyExtractor: function keyExtractor(index) {\n              return index.toString();\n            },\n            renderItem: function renderItem(_ref) {\n              var item = _ref.item;\n              return listItemView(item);\n            }\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport default DetailedList;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  viewContainer: {\n    flex: 1,\n    backgroundColor: \"white\"\n  },\n  generalView: {\n    flex: 1\n  },\n  listView: {\n    marginTop: 20\n  },\n  listItemView: {\n    backgroundColor: \"white\",\n    margin: 5,\n    padding: 5,\n    borderRadius: 10\n  },\n  flatList: {\n    backgroundColor: 'blue'\n  },\n  textL: {\n    padding: 5,\n    marginLeft: 10,\n    color: \"black\",\n    alignContent: \"center\",\n    alignItems: \"center\"\n  },\n  title: {\n    fontSize: 20,\n    color: '#142492',\n    marginLeft: '20%',\n    marginTop: 30\n  }\n});","map":{"version":3,"names":["React","MyText","useFocusEffect","DatabaseConnection","db","getConnection","DetailedList","useState","treatments","setTreatments","transaction","txn","executeSql","tx","results","rows","length","temp","i","item","carCode","results2","console","log","treatment","name","lastname","results3","replacements","push","Alert","alert","text","cancelable","listItemView","styles","textL","fInicio","fFin","costoTratamiento","id","container","title","view","paddingHorizontal","paddingBottom","index","toString","StyleSheet","create","flex","viewContainer","backgroundColor","generalView","listView","marginTop","margin","padding","borderRadius","flatList","marginLeft","color","alignContent","alignItems","fontSize"],"sources":["C:/Users/agust/Desktop/OBLIGATORIO DD MOVILES - Leandro Miranda y Agustin Maciel/local/src/screens/DetailedList/DetailedList.js"],"sourcesContent":["import { StyleSheet, Text, View, SafeAreaView, Alert, FlatList } from 'react-native'\r\nimport React from 'react'\r\nimport MyText from \"../../components/MyText\";\r\nimport { useFocusEffect } from '@react-navigation/native';\r\nimport DatabaseConnection from \"../../database/database-connection\";\r\n\r\nconst db = DatabaseConnection.getConnection();\r\n\r\n\r\nconst DetailedList = () => {\r\n  const [treatments, setTreatments] = React.useState(null);\r\n  useFocusEffect(() => {\r\n\r\n    db.transaction( (txn) => {\r\n\r\n      txn.executeSql(`SELECT * FROM treatments INNER JOIN cars ON treatments.carCode = cars.carCode`, [], (tx, results) => {\r\n        // validar resultado\r\n\r\n        if (results.rows.length > 0) {\r\n          var temp = [];\r\n          for (let i = 0; i < results.rows.length; ++i){\r\n\r\n            txn.executeSql(`SELECT name, lastname FROM users INNER JOIN cars ON cars.carCode = ? WHERE cars.carCode= ?`, [results.rows.item(i).carCode, results.rows.item(i).carCode], (tx, results2) => {\r\n              console.log(results.rows.item(0).carCode)\r\n              var treatment = results.rows.item(i);\r\n              treatment.name = results2.rows.item(0).name\r\n              treatment.lastname = results2.rows.item(0).lastname\r\n              txn.executeSql(`SELECT name FROM replacements INNER JOIN cars ON cars.carCode = ?`, [results.rows.item(i).carCode], (tx, results3) => {\r\n                if(results3.rows.length!=0){\r\n                  treatment.replacements = true;\r\n                }\r\n                else{\r\n                  treatment.replacements = false;\r\n                }\r\n                temp.push(treatment);\r\n              })\r\n            })\r\n            \r\n          }\r\n          setTreatments(temp);\r\n        } else {\r\n          Alert.alert(\r\n            \"Mensaje\",\r\n            \"No hay tratamientos\",\r\n            [\r\n              {\r\n                text: \"Ok\",\r\n              },\r\n            ],\r\n            { cancelable: false }\r\n          );\r\n        }\r\n      });\r\n\r\n      /*db.transaction((tx) => {\r\n        tx.executeSql(\r\n          `DELETE FROM treatments WHERE name = ?`,\r\n          [\"\"],\r\n          (tx, results) => {\r\n            console.log(\"results\", results);\r\n            // validar resultado\r\n            if (results.rowsAffected > 0) {\r\n              Alert.alert(\"Tratamiento eliminado\");\r\n            } else {\r\n              Alert.alert(\"El tratamiento no existe\");\r\n            }\r\n          }\r\n        );\r\n      });*/\r\n    });\r\n  });\r\n  const listItemView = (item) => {\r\n    return (\r\n      <View key={item.id} style={styles.listItemView}>\r\n        <MyText text=\"Nombre\" style={styles.textL}/>\r\n        <MyText text={item.name} style={styles.textL}/>\r\n\r\n        <MyText text=\"Auto\" style={styles.textL}/>\r\n        <MyText text={item.carCode} style={styles.textL}/>\r\n\r\n        <MyText text=\"Fecha inicio\" style={styles.textL}/>\r\n        <MyText text={item.fInicio} style={styles.textL}/>\r\n\r\n        <MyText text=\"Fecha fin:\" style={styles.textL}/>\r\n        <MyText text={item.fFin} style={styles.textL}/>\r\n\r\n        <MyText text=\"Costo tratamiento:\" style={styles.textL}/>\r\n        <MyText text={item.costoTratamiento} style={styles.textL}/>\r\n\r\n      </View>\r\n    );\r\n  };\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n    <View>\r\n      <View>\r\n        <MyText text=\"Tratamientos detallados\" style={styles.title} />\r\n          <View style={styles.view}>\r\n            <FlatList \r\n            contentContainerStyle={{ paddingHorizontal: 20, paddingBottom: 150 }}\r\n            data={treatments}\r\n            keyExtractor={(index) => index.toString()}\r\n            renderItem={({ item }) => listItemView(item)}\r\n\r\n            />\r\n          </View>\r\n      </View>\r\n    </View>\r\n    </SafeAreaView>\r\n  )\r\n}\r\n\r\nexport default DetailedList\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  viewContainer: {\r\n    flex: 1,\r\n    backgroundColor: \"white\",\r\n  },\r\n  generalView: {\r\n    flex: 1,\r\n  },\r\n  listView: {\r\n    marginTop: 20,\r\n  },\r\n  listItemView: {\r\n    backgroundColor: \"white\",\r\n    margin: 5,\r\n    padding: 5,\r\n    borderRadius: 10,\r\n  },\r\n  flatList: {\r\n    backgroundColor: 'blue'\r\n  },\r\n  textL: {\r\n    padding: 5,\r\n    marginLeft: 10,\r\n    color: \"black\",\r\n    alignContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    color: '#142492',\r\n    marginLeft: '20%',\r\n    marginTop: 30,\r\n  }\r\n})"],"mappings":";;;;;;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,OAAOC,kBAAP;;;AAEA,IAAMC,EAAE,GAAGD,kBAAkB,CAACE,aAAnB,EAAX;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;EACzB,sBAAoCN,KAAK,CAACO,QAAN,CAAe,IAAf,CAApC;EAAA;EAAA,IAAOC,UAAP;EAAA,IAAmBC,aAAnB;;EACAP,cAAc,CAAC,YAAM;IAEnBE,EAAE,CAACM,WAAH,CAAgB,UAACC,GAAD,EAAS;MAEvBA,GAAG,CAACC,UAAJ,kFAAgG,EAAhG,EAAoG,UAACC,EAAD,EAAKC,OAAL,EAAiB;QAGnH,IAAIA,OAAO,CAACC,IAAR,CAAaC,MAAb,GAAsB,CAA1B,EAA6B;UAC3B,IAAIC,IAAI,GAAG,EAAX;;UAD2B,2BAElBC,CAFkB;YAIzBP,GAAG,CAACC,UAAJ,+FAA6G,CAACE,OAAO,CAACC,IAAR,CAAaI,IAAb,CAAkBD,CAAlB,EAAqBE,OAAtB,EAA+BN,OAAO,CAACC,IAAR,CAAaI,IAAb,CAAkBD,CAAlB,EAAqBE,OAApD,CAA7G,EAA2K,UAACP,EAAD,EAAKQ,QAAL,EAAkB;cAC3LC,OAAO,CAACC,GAAR,CAAYT,OAAO,CAACC,IAAR,CAAaI,IAAb,CAAkB,CAAlB,EAAqBC,OAAjC;cACA,IAAII,SAAS,GAAGV,OAAO,CAACC,IAAR,CAAaI,IAAb,CAAkBD,CAAlB,CAAhB;cACAM,SAAS,CAACC,IAAV,GAAiBJ,QAAQ,CAACN,IAAT,CAAcI,IAAd,CAAmB,CAAnB,EAAsBM,IAAvC;cACAD,SAAS,CAACE,QAAV,GAAqBL,QAAQ,CAACN,IAAT,CAAcI,IAAd,CAAmB,CAAnB,EAAsBO,QAA3C;cACAf,GAAG,CAACC,UAAJ,sEAAoF,CAACE,OAAO,CAACC,IAAR,CAAaI,IAAb,CAAkBD,CAAlB,EAAqBE,OAAtB,CAApF,EAAoH,UAACP,EAAD,EAAKc,QAAL,EAAkB;gBACpI,IAAGA,QAAQ,CAACZ,IAAT,CAAcC,MAAd,IAAsB,CAAzB,EAA2B;kBACzBQ,SAAS,CAACI,YAAV,GAAyB,IAAzB;gBACD,CAFD,MAGI;kBACFJ,SAAS,CAACI,YAAV,GAAyB,KAAzB;gBACD;;gBACDX,IAAI,CAACY,IAAL,CAAUL,SAAV;cACD,CARD;YASD,CAdD;UAJyB;;UAE3B,KAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACC,IAAR,CAAaC,MAAjC,EAAyC,EAAEE,CAA3C,EAA6C;YAAA,MAApCA,CAAoC;UAkB5C;;UACDT,aAAa,CAACQ,IAAD,CAAb;QACD,CAtBD,MAsBO;UACLa,KAAK,CAACC,KAAN,CACE,SADF,EAEE,qBAFF,EAGE,CACE;YACEC,IAAI,EAAE;UADR,CADF,CAHF,EAQE;YAAEC,UAAU,EAAE;UAAd,CARF;QAUD;MACF,CArCD;IAsDD,CAxDD;EAyDD,CA3Da,CAAd;;EA4DA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACf,IAAD,EAAU;IAC7B,OACE,MAAC,IAAD;MAAoB,KAAK,EAAEgB,MAAM,CAACD,YAAlC;MAAA,WACE,KAAC,MAAD;QAAQ,IAAI,EAAC,QAAb;QAAsB,KAAK,EAAEC,MAAM,CAACC;MAApC,EADF,EAEE,KAAC,MAAD;QAAQ,IAAI,EAAEjB,IAAI,CAACM,IAAnB;QAAyB,KAAK,EAAEU,MAAM,CAACC;MAAvC,EAFF,EAIE,KAAC,MAAD;QAAQ,IAAI,EAAC,MAAb;QAAoB,KAAK,EAAED,MAAM,CAACC;MAAlC,EAJF,EAKE,KAAC,MAAD;QAAQ,IAAI,EAAEjB,IAAI,CAACC,OAAnB;QAA4B,KAAK,EAAEe,MAAM,CAACC;MAA1C,EALF,EAOE,KAAC,MAAD;QAAQ,IAAI,EAAC,cAAb;QAA4B,KAAK,EAAED,MAAM,CAACC;MAA1C,EAPF,EAQE,KAAC,MAAD;QAAQ,IAAI,EAAEjB,IAAI,CAACkB,OAAnB;QAA4B,KAAK,EAAEF,MAAM,CAACC;MAA1C,EARF,EAUE,KAAC,MAAD;QAAQ,IAAI,EAAC,YAAb;QAA0B,KAAK,EAAED,MAAM,CAACC;MAAxC,EAVF,EAWE,KAAC,MAAD;QAAQ,IAAI,EAAEjB,IAAI,CAACmB,IAAnB;QAAyB,KAAK,EAAEH,MAAM,CAACC;MAAvC,EAXF,EAaE,KAAC,MAAD;QAAQ,IAAI,EAAC,oBAAb;QAAkC,KAAK,EAAED,MAAM,CAACC;MAAhD,EAbF,EAcE,KAAC,MAAD;QAAQ,IAAI,EAAEjB,IAAI,CAACoB,gBAAnB;QAAqC,KAAK,EAAEJ,MAAM,CAACC;MAAnD,EAdF;IAAA,GAAWjB,IAAI,CAACqB,EAAhB,CADF;EAmBD,CApBD;;EAqBA,OACE,KAAC,YAAD;IAAc,KAAK,EAAEL,MAAM,CAACM,SAA5B;IAAA,UACA,KAAC,IAAD;MAAA,UACE,MAAC,IAAD;QAAA,WACE,KAAC,MAAD;UAAQ,IAAI,EAAC,yBAAb;UAAuC,KAAK,EAAEN,MAAM,CAACO;QAArD,EADF,EAEI,KAAC,IAAD;UAAM,KAAK,EAAEP,MAAM,CAACQ,IAApB;UAAA,UACE,KAAC,QAAD;YACA,qBAAqB,EAAE;cAAEC,iBAAiB,EAAE,EAArB;cAAyBC,aAAa,EAAE;YAAxC,CADvB;YAEA,IAAI,EAAErC,UAFN;YAGA,YAAY,EAAE,sBAACsC,KAAD;cAAA,OAAWA,KAAK,CAACC,QAAN,EAAX;YAAA,CAHd;YAIA,UAAU,EAAE;cAAA,IAAG5B,IAAH,QAAGA,IAAH;cAAA,OAAce,YAAY,CAACf,IAAD,CAA1B;YAAA;UAJZ;QADF,EAFJ;MAAA;IADF;EADA,EADF;AAkBD,CArGD;;AAuGA,eAAeb,YAAf;AAEA,IAAM6B,MAAM,GAAGa,UAAU,CAACC,MAAX,CAAkB;EAC/BR,SAAS,EAAE;IACTS,IAAI,EAAE;EADG,CADoB;EAI/BC,aAAa,EAAE;IACbD,IAAI,EAAE,CADO;IAEbE,eAAe,EAAE;EAFJ,CAJgB;EAQ/BC,WAAW,EAAE;IACXH,IAAI,EAAE;EADK,CARkB;EAW/BI,QAAQ,EAAE;IACRC,SAAS,EAAE;EADH,CAXqB;EAc/BrB,YAAY,EAAE;IACZkB,eAAe,EAAE,OADL;IAEZI,MAAM,EAAE,CAFI;IAGZC,OAAO,EAAE,CAHG;IAIZC,YAAY,EAAE;EAJF,CAdiB;EAoB/BC,QAAQ,EAAE;IACRP,eAAe,EAAE;EADT,CApBqB;EAuB/BhB,KAAK,EAAE;IACLqB,OAAO,EAAE,CADJ;IAELG,UAAU,EAAE,EAFP;IAGLC,KAAK,EAAE,OAHF;IAILC,YAAY,EAAE,QAJT;IAKLC,UAAU,EAAE;EALP,CAvBwB;EA8B/BrB,KAAK,EAAE;IACLsB,QAAQ,EAAE,EADL;IAELH,KAAK,EAAE,SAFF;IAGLD,UAAU,EAAE,KAHP;IAILL,SAAS,EAAE;EAJN;AA9BwB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}